{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/messages/chat/index.vue?c655","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/messages/chat/index.vue?0bca","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/messages/chat/index.vue?eedd","uni-app:///pages/messages/chat/index.vue","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/messages/chat/index.vue?8bb2","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/messages/chat/index.vue?f8cc"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","CustomNavBar","data","friendId","friendName","friendAvatar","messages","inputMessage","scrollTop","isLoadingMore","currentUserId","currentPage","pageSize","hasMore","socket","computed","chatTitle","onLoad","console","onUnload","methods","loadChatHistory","uni","title","url","method","senderId","receiverId","page","header","success","id","content","sendTime","isSelf","isRead","isRevoked","icon","fail","complete","sendMessage","messageData","tempMessage","sendFailed","loadMoreMessages","markMessagesAsRead","unreadMessages","revokeMessage","deleteMessage","scrollToBottom","formatTime","initWebSocket"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACgL;AAChL,gBAAgB,iLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AAAmqB,CAAgB,moBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACmDvrB;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACA;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACAC;IACA;MACA;IACA;IACA;MACA;IACA;;IAEA;IACA;;IAEA;IACA;EACA;EACAC;IACA;IACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MAAA;MACA;QACA;QACA;QACA;MACA;MAEA;MAEAC;QACAC;MACA;MAEAD;QACAE;QACAC;QACAvB;UACAwB;UACAC;UACAC;UACAhB;QACA;QACAiB;UACA;QACA;QACAC;UACAZ;UACA;YACA;;YAEA;YACA;cAAA;gBACAa;gBACAC;gBACAC;gBACAC;gBACAC;gBACAC;cACA;YAAA;YAEA;cACA;YACA;cACA;YACA;;YAEA;YACA;;YAEA;YACA;cACA;gBACA;cACA;YACA;;YAEA;YACA;UACA;YACAd;cACAC;cACAc;YACA;UACA;QACA;QACAC;UACApB;UACAI;YACAC;YACAc;UACA;QACA;QACAE;UACAjB;QACA;MACA;IACA;IAEA;IACAkB;MAAA;MACA;MAEA;QACAd;QACAC;QACAK;QACAC;QACAE;QACAC;MACA;;MAEA;MACA,kDACAK;QACAP;QACAH;MAAA,EACA;;MAEA;MACA;;MAEA;MACA;QACA;MACA;;MAEA;MACAT;QACAE;QACAC;QACAvB;QACA2B;UACA;QACA;QACAC;UACAZ;UACA;YACA;YACA;YACA;cAAA;YAAA;YACA;cACA,oEACAwB;gBACAX;cAAA,GACA;YACA;UACA;YACAT;cACAC;cACAc;YACA;YACA;YACA;cAAA;YAAA;YACA;cACA,qEACAK;gBACAC;cAAA,GACA;YACA;UACA;QACA;QACAL;UACApB;UACAI;YACAC;YACAc;UACA;UACA;UACA;YAAA;UAAA;UACA;YACA,oEACAK;cACAC;YAAA,GACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MAEA;MACA;MAEAtB;QACAE;QACAC;QACAvB;UACAwB;UACAC;UACAC;UACAhB;QACA;QACAiB;UACA;QACA;QACAC;UACAZ;UACA;YACA;;YAEA;YACA;cAAA;gBACAa;gBACAC;gBACAC;gBACAC;gBACAC;gBACAC;cACA;YAAA;;YAEA;YACA;;YAEA;YACA;UACA;YACAd;cACAC;cACAc;YACA;UACA;QACA;QACAC;UACApB;UACAI;YACAC;YACAc;UACA;QACA;QACAE;UACA;QACA;MACA;IACA;IAEA;IACAM;MAAA;MACA;MACA;QAAA;MAAA;MAEAC;QACAxB;UACAE;UACAC;UACAK;YACA;cACA;cACA;gBAAA;cAAA;cACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IAEA;IACAiB;MAAA;MACA;MAEAzB;QACAC;QACAS;QACAF;UACA;YACAR;cACAE;cACAC;cACAK;gBACA;kBACA;kBACA;oBAAA;kBAAA;kBACA;oBACA,oEACA;sBACAM;oBAAA,GACA;kBACA;kBAEAd;oBACAC;oBACAc;kBACA;gBACA;kBACAf;oBACAC;oBACAc;kBACA;gBACA;cACA;cACAC;gBACAhB;kBACAC;kBACAc;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IAEA;IACAW;MAAA;MACA;MAEA1B;QACAC;QACAS;QACAF;UACA;YACAR;cACAE;cACAC;cACAK;gBACA;kBACA;kBACA;oBAAA;kBAAA;kBACA;oBACA;kBACA;kBAEAR;oBACAC;oBACAc;kBACA;gBACA;kBACAf;oBACAC;oBACAc;kBACA;gBACA;cACA;cACAC;gBACAhB;kBACAC;kBACAc;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IAEA;IACAY;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MAEA;MACA;MACA;MAEA;MACA;MACA;;MAEA;MACA;QACA;MACA;MACA;MAAA,KACA;QACA;MACA;MACA;MAAA,KACA;QACA;QACA;MACA;MACA;MAAA,KACA;QACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;;MAEA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;;MAEA;MACA;MACA;IAAA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;ACvfA;AAAA;AAAA;AAAA;AAAg9B,CAAgB,g4BAAG,EAAC,C;;;;;;;;;;;ACAp+B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/messages/chat/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/messages/chat/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=27646bd6&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/messages/chat/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=27646bd6&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.messages, function (msg, index) {\n    var $orig = _vm.__get_orig(msg)\n    var m0 = _vm.formatTime(msg.sendTime)\n    return {\n      $orig: $orig,\n      m0: m0,\n    }\n  })\n  var g0 = _vm.messages.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 使用自定义导航栏，设置showBack为true -->\r\n\t\t<custom-nav-bar :title=\"chatTitle\" subtitle=\"聊天详情\" :show-back=\"true\"></custom-nav-bar>\r\n\t\t\r\n\t\t<view class=\"chat-container\">\r\n\t\t\t<scroll-view scroll-y=\"true\" class=\"chat-list\" :scroll-top=\"scrollTop\" @scrolltoupper=\"loadMoreMessages\">\r\n\t\t\t\t<!-- 加载更多提示 -->\r\n\t\t\t\t<view v-if=\"isLoadingMore\" class=\"loading-more\">\r\n\t\t\t\t\t<text>加载更多消息...</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 聊天消息列表 -->\r\n\t\t\t\t<view class=\"chat-item\" v-for=\"(msg, index) in messages\" :key=\"index\" :class=\"{ 'self': msg.isSelf }\">\r\n\t\t\t\t\t<view v-if=\"!msg.isSelf\" class=\"avatar-container\">\r\n\t\t\t\t\t\t<image class=\"avatar\" :src=\"friendAvatar\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"message-content\" :class=\"{ 'self-message': msg.isSelf, 'revoked': msg.isRevoked === 1 }\">\r\n\t\t\t\t\t\t<text v-if=\"msg.isRevoked === 1\" class=\"revoked-text\">消息已撤回</text>\r\n\t\t\t\t\t\t<text v-else class=\"message-text\">{{msg.content}}</text>\r\n\t\t\t\t\t\t<text class=\"message-time\">{{formatTime(msg.sendTime)}}</text>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- 消息操作菜单 - 仅显示自己发的消息且未撤回的 -->\r\n\t\t\t\t\t\t<view v-if=\"msg.isSelf && msg.isRevoked !== 1\" class=\"message-actions\">\r\n\t\t\t\t\t\t\t<text @click=\"revokeMessage(msg)\" class=\"action-item\">撤回</text>\r\n\t\t\t\t\t\t\t<text @click=\"deleteMessage(msg)\" class=\"action-item\">删除</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view v-if=\"msg.isSelf\" class=\"avatar-container\">\r\n\t\t\t\t\t\t<image class=\"avatar\" src=\"https://ykhyyy.oss-cn-beijing.aliyuncs.com/MyApp/userAvatar/default-avatar.png\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 空消息提示 -->\r\n\t\t\t\t<view v-if=\"messages.length === 0\" class=\"empty-messages\">\r\n\t\t\t\t\t<text>暂无消息，开始聊天吧</text>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t\r\n\t\t\t<view class=\"input-area\">\r\n\t\t\t\t<input type=\"text\" class=\"message-input\" v-model=\"inputMessage\" placeholder=\"输入消息...\" confirm-type=\"send\" @confirm=\"sendMessage\" />\r\n\t\t\t\t<view class=\"send-btn\" @click=\"sendMessage\">发送</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport CustomNavBar from '@/components/CustomNavBar.vue';\r\nimport config from '@/config/index.js';\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tCustomNavBar\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tfriendId: '',\r\n\t\t\tfriendName: '对方',\r\n\t\t\tfriendAvatar: 'https://ykhyyy.oss-cn-beijing.aliyuncs.com/MyApp/userAvatar/default-avatar.png',\r\n\t\t\tmessages: [],\r\n\t\t\tinputMessage: '',\r\n\t\t\tscrollTop: 0,\r\n\t\t\tisLoadingMore: false,\r\n\t\t\tcurrentUserId: 1, // 当前用户ID，实际项目中应该从登录信息获取\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tpageSize: 20,\r\n\t\t\thasMore: true,\r\n\t\t\t// WebSocket连接\r\n\t\t\tsocket: null\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tchatTitle() {\r\n\t\t\treturn this.friendName || '聊天';\r\n\t\t}\r\n\t},\r\n\tonLoad(options) {\r\n\t\tconsole.log('聊天页面参数:', options);\r\n\t\tif (options.id) {\r\n\t\t\tthis.friendId = options.id;\r\n\t\t}\r\n\t\tif (options.name) {\r\n\t\t\tthis.friendName = options.name;\r\n\t\t}\r\n\t\t\r\n\t\t// 加载聊天记录\r\n\t\tthis.loadChatHistory();\r\n\t\t\r\n\t\t// 初始化WebSocket (可选实现)\r\n\t\t// this.initWebSocket();\r\n\t},\r\n\tonUnload() {\r\n\t\t// 关闭WebSocket连接\r\n\t\tif (this.socket) {\r\n\t\t\tthis.socket.close();\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 加载聊天记录\r\n\t\tloadChatHistory(refresh = true) {\r\n\t\t\tif (refresh) {\r\n\t\t\t\tthis.currentPage = 1;\r\n\t\t\t\tthis.messages = [];\r\n\t\t\t\tthis.hasMore = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.hasMore) return;\r\n\t\t\t\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中...'\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tuni.request({\r\n\t\t\t\turl: `${config.BaseUrl}/api/friend/chat/message/list`,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsenderId: this.currentUserId,\r\n\t\t\t\t\treceiverId: this.friendId,\r\n\t\t\t\t\tpage: this.currentPage,\r\n\t\t\t\t\tpageSize: this.pageSize\r\n\t\t\t\t},\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'content-type': 'application/json'\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconsole.log('获取聊天记录成功:', res.data);\r\n\t\t\t\t\tif (res.data && res.data.code === 1) {\r\n\t\t\t\t\t\tconst records = res.data.data || [];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 处理消息数据\r\n\t\t\t\t\t\tconst formattedMessages = records.map(msg => ({\r\n\t\t\t\t\t\t\tid: msg.id,\r\n\t\t\t\t\t\t\tcontent: msg.content,\r\n\t\t\t\t\t\t\tsendTime: msg.sendTime,\r\n\t\t\t\t\t\t\tisSelf: msg.senderId === this.currentUserId,\r\n\t\t\t\t\t\t\tisRead: msg.isRead,\r\n\t\t\t\t\t\t\tisRevoked: msg.isRevoked\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (refresh) {\r\n\t\t\t\t\t\t\tthis.messages = formattedMessages;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.messages = [...formattedMessages, ...this.messages];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 判断是否还有更多消息\r\n\t\t\t\t\t\tthis.hasMore = records.length === this.pageSize;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 第一次加载完成后，滚动到底部\r\n\t\t\t\t\t\tif (refresh) {\r\n\t\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\t\tthis.scrollToBottom();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 标记收到的消息为已读\r\n\t\t\t\t\t\tthis.markMessagesAsRead();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '获取聊天记录失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.error('获取聊天记录失败:', err);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: () => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// 发送消息\r\n\t\tsendMessage() {\r\n\t\t\tif (!this.inputMessage.trim()) return;\r\n\t\t\t\r\n\t\t\tconst messageData = {\r\n\t\t\t\tsenderId: this.currentUserId,\r\n\t\t\t\treceiverId: this.friendId,\r\n\t\t\t\tcontent: this.inputMessage,\r\n\t\t\t\tsendTime: new Date().toISOString(),\r\n\t\t\t\tisRead: 0,\r\n\t\t\t\tisRevoked: 0\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// 先添加到本地列表，提高用户体验\r\n\t\t\tconst tempMessage = {\r\n\t\t\t\t...messageData,\r\n\t\t\t\tisSelf: true,\r\n\t\t\t\tid: 'temp_' + Date.now() // 临时ID\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tthis.messages.push(tempMessage);\r\n\t\t\tthis.inputMessage = '';\r\n\t\t\t\r\n\t\t\t// 滚动到底部\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.scrollToBottom();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// 发送到服务器\r\n\t\t\tuni.request({\r\n\t\t\t\turl: `${config.BaseUrl}/api/friend/chat/message/send`,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: messageData,\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'content-type': 'application/json'\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconsole.log('发送消息成功:', res.data);\r\n\t\t\t\t\tif (res.data && res.data.code === 1) {\r\n\t\t\t\t\t\t// 用服务器返回的消息ID替换临时ID\r\n\t\t\t\t\t\tconst serverMessage = res.data.data;\r\n\t\t\t\t\t\tconst index = this.messages.findIndex(m => m === tempMessage);\r\n\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\tthis.$set(this.messages, index, {\r\n\t\t\t\t\t\t\t\t...tempMessage,\r\n\t\t\t\t\t\t\t\tid: serverMessage.id\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '发送失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// 标记消息为发送失败\r\n\t\t\t\t\t\tconst index = this.messages.findIndex(m => m === tempMessage);\r\n\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\tthis.$set(this.messages, index, {\r\n\t\t\t\t\t\t\t\t...tempMessage,\r\n\t\t\t\t\t\t\t\tsendFailed: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.error('发送消息失败:', err);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 标记消息为发送失败\r\n\t\t\t\t\tconst index = this.messages.findIndex(m => m === tempMessage);\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tthis.$set(this.messages, index, {\r\n\t\t\t\t\t\t\t...tempMessage,\r\n\t\t\t\t\t\t\tsendFailed: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// 加载更多历史消息\r\n\t\tloadMoreMessages() {\r\n\t\t\tif (!this.hasMore || this.isLoadingMore) return;\r\n\t\t\t\r\n\t\t\tthis.isLoadingMore = true;\r\n\t\t\tthis.currentPage++;\r\n\t\t\t\r\n\t\t\tuni.request({\r\n\t\t\t\turl: `${config.BaseUrl}/api/friend/chat/message/list`,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsenderId: this.currentUserId,\r\n\t\t\t\t\treceiverId: this.friendId,\r\n\t\t\t\t\tpage: this.currentPage,\r\n\t\t\t\t\tpageSize: this.pageSize\r\n\t\t\t\t},\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'content-type': 'application/json'\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconsole.log('加载更多消息成功:', res.data);\r\n\t\t\t\t\tif (res.data && res.data.code === 1) {\r\n\t\t\t\t\t\tconst records = res.data.data || [];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 处理消息数据\r\n\t\t\t\t\t\tconst formattedMessages = records.map(msg => ({\r\n\t\t\t\t\t\t\tid: msg.id,\r\n\t\t\t\t\t\t\tcontent: msg.content,\r\n\t\t\t\t\t\t\tsendTime: msg.sendTime,\r\n\t\t\t\t\t\t\tisSelf: msg.senderId === this.currentUserId,\r\n\t\t\t\t\t\t\tisRead: msg.isRead,\r\n\t\t\t\t\t\t\tisRevoked: msg.isRevoked\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 在列表前面添加历史消息\r\n\t\t\t\t\t\tthis.messages = [...formattedMessages, ...this.messages];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 判断是否还有更多消息\r\n\t\t\t\t\t\tthis.hasMore = records.length === this.pageSize;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '获取历史消息失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.error('获取历史消息失败:', err);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: () => {\r\n\t\t\t\t\tthis.isLoadingMore = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// 标记消息为已读\r\n\t\tmarkMessagesAsRead() {\r\n\t\t\t// 找出所有未读的非自己发送的消息\r\n\t\t\tconst unreadMessages = this.messages.filter(msg => !msg.isSelf && msg.isRead === 0);\r\n\t\t\t\r\n\t\t\tunreadMessages.forEach(msg => {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `${config.BaseUrl}/api/friend/chat/message/read/${msg.id}`,\r\n\t\t\t\t\tmethod: 'PUT',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.data && res.data.code === 1) {\r\n\t\t\t\t\t\t\t// 更新本地消息状态\r\n\t\t\t\t\t\t\tconst index = this.messages.findIndex(m => m.id === msg.id);\r\n\t\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\t\tthis.messages[index].isRead = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// 撤回消息\r\n\t\trevokeMessage(msg) {\r\n\t\t\tif (!msg || !msg.id || msg.id.toString().startsWith('temp_')) return;\r\n\t\t\t\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '确定要撤回这条消息吗？',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\turl: `${config.BaseUrl}/api/friend/chat/message/revoke/${msg.id}`,\r\n\t\t\t\t\t\t\tmethod: 'PUT',\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tif (res.data && res.data.code === 1) {\r\n\t\t\t\t\t\t\t\t\t// 更新本地消息状态\r\n\t\t\t\t\t\t\t\t\tconst index = this.messages.findIndex(m => m.id === msg.id);\r\n\t\t\t\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\t\t\t\tthis.$set(this.messages, index, {\r\n\t\t\t\t\t\t\t\t\t\t\t...this.messages[index],\r\n\t\t\t\t\t\t\t\t\t\t\tisRevoked: 1\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '已撤回',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '撤回失败',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// 删除消息\r\n\t\tdeleteMessage(msg) {\r\n\t\t\tif (!msg || !msg.id || msg.id.toString().startsWith('temp_')) return;\r\n\t\t\t\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '确定要删除这条消息吗？',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\turl: `${config.BaseUrl}/api/friend/chat/message/${msg.id}`,\r\n\t\t\t\t\t\t\tmethod: 'DELETE',\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tif (res.data && res.data.code === 1) {\r\n\t\t\t\t\t\t\t\t\t// 从本地列表中移除\r\n\t\t\t\t\t\t\t\t\tconst index = this.messages.findIndex(m => m.id === msg.id);\r\n\t\t\t\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\t\t\t\tthis.messages.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '已删除',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '删除失败',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// 滚动到底部\r\n\t\tscrollToBottom() {\r\n\t\t\t// 这个值需要根据消息列表的高度动态设置\r\n\t\t\t// 这里使用一个足够大的值，让scroll-view滚动到底部\r\n\t\t\tthis.scrollTop = 9999;\r\n\t\t},\r\n\t\t\r\n\t\t// 格式化时间\r\n\t\tformatTime(timestamp) {\r\n\t\t\tif (!timestamp) return '';\r\n\t\t\t\r\n\t\t\tconst date = new Date(timestamp);\r\n\t\t\tconst now = new Date();\r\n\t\t\tconst diffDays = Math.floor((now - date) / (24 * 60 * 60 * 1000));\r\n\t\t\t\r\n\t\t\tconst hours = date.getHours().toString().padStart(2, '0');\r\n\t\t\tconst minutes = date.getMinutes().toString().padStart(2, '0');\r\n\t\t\tconst timeStr = `${hours}:${minutes}`;\r\n\t\t\t\r\n\t\t\t// 今天的消息只显示时间\r\n\t\t\tif (diffDays === 0) {\r\n\t\t\t\treturn timeStr;\r\n\t\t\t} \r\n\t\t\t// 昨天的消息\r\n\t\t\telse if (diffDays === 1) {\r\n\t\t\t\treturn `昨天 ${timeStr}`;\r\n\t\t\t} \r\n\t\t\t// 一周内的消息\r\n\t\t\telse if (diffDays < 7) {\r\n\t\t\t\tconst days = ['日', '一', '二', '三', '四', '五', '六'];\r\n\t\t\t\treturn `周${days[date.getDay()]} ${timeStr}`;\r\n\t\t\t}\r\n\t\t\t// 更早的消息\r\n\t\t\telse {\r\n\t\t\t\tconst month = (date.getMonth() + 1).toString().padStart(2, '0');\r\n\t\t\t\tconst day = date.getDate().toString().padStart(2, '0');\r\n\t\t\t\treturn `${month}-${day} ${timeStr}`;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 初始化WebSocket (可选实现)\r\n\t\tinitWebSocket() {\r\n\t\t\t// 如果后端支持WebSocket，可以实现这部分\r\n\t\t\t// const wsUrl = `ws://${config.BaseUrl.replace('http://', '')}/ws/chat?userId=${this.currentUserId}`;\r\n\t\t\t// this.socket = new WebSocket(wsUrl);\r\n\t\t\t\r\n\t\t\t// this.socket.onopen = () => {\r\n\t\t\t//     console.log('WebSocket连接已打开');\r\n\t\t\t// };\r\n\t\t\t\r\n\t\t\t// this.socket.onmessage = (event) => {\r\n\t\t\t//     const message = JSON.parse(event.data);\r\n\t\t\t//     // 如果是当前聊天的消息，添加到列表\r\n\t\t\t//     if (message.senderId === this.friendId) {\r\n\t\t\t//         this.messages.push({\r\n\t\t\t//             ...message,\r\n\t\t\t//             isSelf: false\r\n\t\t\t//         });\r\n\t\t\t//         this.scrollToBottom();\r\n\t\t\t//         this.markMessagesAsRead();\r\n\t\t\t//     }\r\n\t\t\t// };\r\n\t\t\t\r\n\t\t\t// this.socket.onerror = (error) => {\r\n\t\t\t//     console.error('WebSocket错误:', error);\r\n\t\t\t// };\r\n\t\t\t\r\n\t\t\t// this.socket.onclose = () => {\r\n\t\t\t//     console.log('WebSocket连接已关闭');\r\n\t\t\t// };\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n\tbackground-color: #F8F7F2;\r\n\tmin-height: 100vh;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n\r\n.chat-container {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tbackground-image: url('/static/decoration/paper-texture.png');\r\n\tbackground-repeat: repeat;\r\n\tpadding-bottom: 120rpx; /* 为输入框留出空间 */\r\n}\r\n\r\n.chat-list {\r\n\tflex: 1;\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.loading-more {\r\n\ttext-align: center;\r\n\tpadding: 20rpx 0;\r\n}\r\n\r\n.loading-more text {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.chat-item {\r\n\tdisplay: flex;\r\n\tmargin-bottom: 30rpx;\r\n\talign-items: flex-start;\r\n}\r\n\r\n.chat-item.self {\r\n\tflex-direction: row-reverse;\r\n}\r\n\r\n.avatar-container {\r\n\twidth: 80rpx;\r\n\theight: 80rpx;\r\n\tmargin: 0 20rpx;\r\n}\r\n\r\n.avatar {\r\n\twidth: 80rpx;\r\n\theight: 80rpx;\r\n\tborder-radius: 40rpx;\r\n\tborder: 2rpx solid rgba(126, 196, 207, 0.3);\r\n}\r\n\r\n.message-content {\r\n\tmax-width: 60%;\r\n\tbackground-color: #FFF;\r\n\tborder-radius: 20rpx;\r\n\tpadding: 20rpx;\r\n\tposition: relative;\r\n\tbox-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.05);\r\n\tborder: 1rpx solid rgba(224, 201, 209, 0.3);\r\n}\r\n\r\n.message-content::before {\r\n\tcontent: \"\";\r\n\tposition: absolute;\r\n\tleft: -16rpx;\r\n\ttop: 20rpx;\r\n\tborder-width: 8rpx;\r\n\tborder-style: solid;\r\n\tborder-color: transparent #FFF transparent transparent;\r\n}\r\n\r\n.self-message {\r\n\tbackground-color: #7EC4CF;\r\n\tcolor: #FFF;\r\n}\r\n\r\n.self-message::before {\r\n\tleft: auto;\r\n\tright: -16rpx;\r\n\tborder-color: transparent transparent transparent #7EC4CF;\r\n}\r\n\r\n.revoked {\r\n\tbackground-color: #f0f0f0;\r\n\tcolor: #999;\r\n}\r\n\r\n.self-message.revoked {\r\n\tbackground-color: #A0C9CF;\r\n\tcolor: rgba(255, 255, 255, 0.7);\r\n}\r\n\r\n.revoked-text {\r\n\tfont-style: italic;\r\n\tfont-size: 28rpx;\r\n}\r\n\r\n.message-text {\r\n\tfont-size: 30rpx;\r\n\tline-height: 1.5;\r\n\tword-break: break-word;\r\n\tfont-family: \"SimSun\", serif;\r\n}\r\n\r\n.message-time {\r\n\tfont-size: 22rpx;\r\n\tcolor: #999;\r\n\tmargin-top: 10rpx;\r\n\tdisplay: block;\r\n\ttext-align: right;\r\n}\r\n\r\n.self-message .message-time {\r\n\tcolor: rgba(255, 255, 255, 0.7);\r\n}\r\n\r\n/* 消息操作菜单 */\r\n.message-actions {\r\n\tposition: absolute;\r\n\tright: 0;\r\n\ttop: -60rpx;\r\n\tbackground-color: rgba(0, 0, 0, 0.7);\r\n\tborder-radius: 10rpx;\r\n\tpadding: 10rpx;\r\n\tdisplay: none;\r\n}\r\n\r\n.message-content:active .message-actions {\r\n\tdisplay: flex;\r\n}\r\n\r\n.message-content:hover .message-actions {\r\n\tdisplay: flex;\r\n}\r\n\r\n.action-item {\r\n\tcolor: #fff;\r\n\tfont-size: 24rpx;\r\n\tpadding: 0 10rpx;\r\n}\r\n\r\n.action-item:not(:last-child) {\r\n\tborder-right: 1rpx solid rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n/* 空消息提示 */\r\n.empty-messages {\r\n\ttext-align: center;\r\n\tpadding: 100rpx 0;\r\n}\r\n\r\n.empty-messages text {\r\n\tfont-size: 28rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.input-area {\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\tbackground-color: #FFF;\r\n\tpadding: 20rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tborder-top: 1rpx solid #f0f0f0;\r\n\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.message-input {\r\n\tflex: 1;\r\n\theight: 80rpx;\r\n\tbackground-color: #f5f5f5;\r\n\tborder-radius: 40rpx;\r\n\tpadding: 0 30rpx;\r\n\tfont-size: 28rpx;\r\n\tfont-family: \"SimSun\", serif;\r\n}\r\n\r\n.send-btn {\r\n\twidth: 120rpx;\r\n\theight: 80rpx;\r\n\tbackground-color: #7EC4CF;\r\n\tborder-radius: 40rpx;\r\n\tcolor: #FFF;\r\n\tfont-size: 28rpx;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tmargin-left: 20rpx;\r\n\tfont-family: \"KaiTi\", \"FangSong\";\r\n}\r\n</style> ","import mod from \"-!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1749280366916\n      var cssReload = require(\"C:/App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}