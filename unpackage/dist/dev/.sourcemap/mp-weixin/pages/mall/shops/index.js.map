{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/mall/shops/index.vue?5b91","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/mall/shops/index.vue?8a00","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/mall/shops/index.vue?cfca","uni-app:///pages/mall/shops/index.vue","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/mall/shops/index.vue?4853","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/mall/shops/index.vue?9d08"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","AiAssistant","CustomNavBar","data","loading","loadingMore","searchText","currentPage","pageSize","totalItems","selectedCategoryId","shops","categories","id","name","computed","hasMore","onLoad","methods","loadShops","current","size","params","uni","url","method","header","success","console","shopList","shop","title","icon","fail","complete","searchShops","selectCategory","loadMore","viewShopDetail","directNavigate","goBack","delta","onPullDownRefresh","setTimeout","onReachBottom"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACgL;AAChL,gBAAgB,iLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/BA;AAAA;AAAA;AAAA;AAAmqB,CAAgB,moBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC8FvrB;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,aACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA;IAEA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MAAA;MACA;QACA;QACA;QACA;MACA;QACA;MACA;;MAEA;MACA;QACAC;QACAC;MACA;;MAEA;MACA;QACAC;MACA;;MAEA;MACA;QACAA;MACA;;MAEA;MACAC;QACAC;QACAC;QACAtB;QACAuB;UACA;QACA;QACAC;UACAC;UACA;YACA;;YAEA;YACA;;YAEA;YACAC;cACA;cACA;gBACA;gBACA;gBACA;gBACA;gBACAC;cACA;;cAEA;cACA;gBACAA;cACA;;cAEA;cACAA;YACA;;YAEA;YACA;cACA;YACA;cACA;YACA;YAEA;YACA;UACA;YACAP;cACAQ;cACAC;YACA;UACA;QACA;QACAC;UACAL;UACAL;YACAQ;YACAC;UACA;QACA;QACAE;UACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACAV;MACAA;MACAA;MAEA;QACA;QACA;UACAE;UACAF;QACA;UACAL;YACAQ;YACAC;UACA;UACA;QACA;MACA;;MAEA;MACA;MAEA;QACAJ;QACAL;UACAQ;UACAC;QACA;QACA;MACA;MAEAJ;MACAL;QACAC;QACAS;UACAL;UACAL;YACAQ;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAO;MACA;QACAX;QACAL;UACAQ;UACAC;QACA;QACA;MACA;MAEAJ;MACAL;QACAC;QACAS;UACAL;UACAL;YACAQ;YACAC;UACA;QACA;MACA;IACA;IAEAQ;MACAjB;QACAkB;QACAR;UACA;UACAV;YACAC;UACA;QACA;MACA;IACA;EACA;EACA;EACAkB;IACA;IACAC;MACApB;IACA;EACA;EAEA;EACAqB;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC/UA;AAAA;AAAA;AAAA;AAAg9B,CAAgB,g4BAAG,EAAC,C;;;;;;;;;;;ACAp+B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/mall/shops/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/mall/shops/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=c2e73204&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/mall/shops/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=c2e73204&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.loading && _vm.shops.length === 0\n  var g1 = !g0 ? _vm.shops.length : null\n  var l0 =\n    !g0 && !(g1 === 0)\n      ? _vm.__map(_vm.shops, function (shop, index) {\n          var $orig = _vm.__get_orig(shop)\n          var g2 = Math.floor(shop.rating || 5)\n          return {\n            $orig: $orig,\n            g2: g2,\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<custom-nav-bar title=\"店铺浏览\" subtitle=\"查看所有店铺\" :show-back=\"true\"></custom-nav-bar>\r\n\t\t\r\n\t\t<!-- 添加明显的返回按钮 -->\r\n\t\t<view class=\"back-button\" @click=\"goBack\">\r\n\t\t\t<text class=\"back-arrow\">←</text>\r\n\t\t\t<text class=\"back-text\">返回</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"header\">\r\n\t\t\t<view class=\"search-box\">\r\n\t\t\t\t<view class=\"search-input-wrapper\">\r\n\t\t\t\t\t<image src=\"https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg\" class=\"search-icon\"></image>\r\n\t\t\t\t\t<input class=\"search-input\" type=\"text\" v-model=\"searchText\" placeholder=\"搜索店铺\" @confirm=\"searchShops\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"categories\">\r\n\t\t\t<view class=\"category-item\" \r\n\t\t\t\tv-for=\"(category, index) in categories\" \r\n\t\t\t\t:key=\"index\" \r\n\t\t\t\t:class=\"{ active: selectedCategoryId === category.id }\"\r\n\t\t\t\t@click=\"selectCategory(category.id)\">\r\n\t\t\t\t<text class=\"category-text\">{{category.name}}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 显示加载中状态 -->\r\n\t\t<view v-if=\"loading && shops.length === 0\" class=\"loading-container\">\r\n\t\t\t<view class=\"loading-spinner\"></view>\r\n\t\t\t<text class=\"loading-text\">加载中...</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 显示无数据状态 -->\r\n\t\t<view v-else-if=\"shops.length === 0\" class=\"empty-container\">\r\n\t\t\t<text class=\"empty-text\">暂无店铺</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 店铺列表 -->\r\n\t\t<scroll-view v-else scroll-y class=\"shop-list\" @scrolltolower=\"loadMore\">\r\n\t\t\t<view class=\"shop-card\" \r\n\t\t\t\tv-for=\"(shop, index) in shops\" \r\n\t\t\t\t:key=\"shop.id || index\" \r\n\t\t\t\t@click=\"viewShopDetail(shop, index)\">\r\n\t\t\t\t<image class=\"shop-image\" \r\n\t\t\t\t\t:src=\"shop.avatar || shop.logo || 'https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg'\" \r\n\t\t\t\t\tmode=\"aspectFill\"\r\n\t\t\t\t\t@click.stop=\"directNavigate(shop.id)\"></image>\r\n\t\t\t\t<view class=\"shop-info\">\r\n\t\t\t\t\t<view class=\"shop-header\">\r\n\t\t\t\t\t\t<text class=\"shop-name\" @click.stop=\"directNavigate(shop.id)\">{{shop.name || '未命名店铺'}}</text>\r\n\t\t\t\t\t\t<view class=\"shop-badges\">\r\n\t\t\t\t\t\t\t<text v-if=\"shop.isOfficial\" class=\"shop-badge official\">官方</text>\r\n\t\t\t\t\t\t\t<text v-if=\"shop.isNew\" class=\"shop-badge new\">新店</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"shop-description\">\r\n\t\t\t\t\t\t<text class=\"description-text\">{{shop.description || '暂无描述'}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"shop-footer\">\r\n\t\t\t\t\t\t<view class=\"shop-rating\">\r\n\t\t\t\t\t\t\t<text class=\"rating-score\">{{shop.rating || '5.0'}}</text>\r\n\t\t\t\t\t\t\t<view class=\"rating-stars\">\r\n\t\t\t\t\t\t\t\t<text v-for=\"n in 5\" :key=\"n\" class=\"star\" :class=\"{ active: n <= Math.floor(shop.rating || 5) }\">★</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"rating-count\">{{shop.ratingCount || 0}}条评价</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text class=\"shop-enter\" @click.stop=\"directNavigate(shop.id)\">进店 ></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 加载更多 -->\r\n\t\t\t<view v-if=\"hasMore\" class=\"load-more\" @click=\"loadMore\">\r\n\t\t\t\t<text v-if=\"!loadingMore\">加载更多</text>\r\n\t\t\t\t<view v-else class=\"loading-spinner small\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view v-else class=\"no-more\">\r\n\t\t\t\t<text>没有更多店铺了</text>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t\r\n\t\t<!-- AI助手组件 -->\r\n\t\t<ai-assistant></ai-assistant>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport AiAssistant from '@/components/AiAssistant.vue';\r\n\timport CustomNavBar from '@/components/CustomNavBar.vue';\r\n\timport config from '@/config/index.js';\r\n\t\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tAiAssistant,\r\n\t\t\tCustomNavBar\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tloadingMore: false,\r\n\t\t\t\tsearchText: '',\r\n\t\t\t\tcurrentPage: 1,\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t\ttotalItems: 0,\r\n\t\t\t\tselectedCategoryId: null,\r\n\t\t\t\tshops: [],\r\n\t\t\t\tcategories: [\r\n\t\t\t\t\t{ id: null, name: '全部' },\r\n\t\t\t\t\t{ id: 1, name: '美食' },\r\n\t\t\t\t\t{ id: 2, name: '书籍' },\r\n\t\t\t\t\t{ id: 3, name: '服饰' },\r\n\t\t\t\t\t{ id: 4, name: '数码' }\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\thasMore() {\r\n\t\t\t\treturn this.shops.length < this.totalItems;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t// 页面加载时获取数据\r\n\t\t\tthis.loadShops();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 加载店铺数据\r\n\t\t\tloadShops(refresh = true) {\r\n\t\t\t\tif (refresh) {\r\n\t\t\t\t\tthis.currentPage = 1;\r\n\t\t\t\t\tthis.loading = true;\r\n\t\t\t\t\tthis.shops = [];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.loadingMore = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 构建查询参数\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tcurrent: this.currentPage,\r\n\t\t\t\t\tsize: this.pageSize\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// 如果选择了分类，添加分类ID\r\n\t\t\t\tif (this.selectedCategoryId) {\r\n\t\t\t\t\tparams.categoryId = this.selectedCategoryId;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 如果有搜索关键词\r\n\t\t\t\tif (this.searchText) {\r\n\t\t\t\t\tparams.name = this.searchText;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 发起API请求\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `${config.BaseUrl}/api/shop/page`,\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: params,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': 'application/json'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('获取店铺数据成功:', res.data);\r\n\t\t\t\t\t\tif (res.data && res.data.code === 1) {\r\n\t\t\t\t\t\t\tconst data = res.data.data;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 处理店铺数据\r\n\t\t\t\t\t\t\tconst shopList = data.records || [];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 为每个店铺添加isNew和isOfficial标识\r\n\t\t\t\t\t\t\tshopList.forEach(shop => {\r\n\t\t\t\t\t\t\t\t// 如果创建时间在30天内，标记为新店\r\n\t\t\t\t\t\t\t\tif (shop.createdTime) {\r\n\t\t\t\t\t\t\t\t\tconst createDate = new Date(shop.createdTime);\r\n\t\t\t\t\t\t\t\t\tconst now = new Date();\r\n\t\t\t\t\t\t\t\t\tconst diffTime = Math.abs(now - createDate);\r\n\t\t\t\t\t\t\t\t\tconst diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\t\t\t\tshop.isNew = diffDays <= 30;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 设置默认评分为5.0\r\n\t\t\t\t\t\t\t\tif (!shop.rating) {\r\n\t\t\t\t\t\t\t\t\tshop.rating = 5.0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 根据店铺类型标记是否为官方店铺\r\n\t\t\t\t\t\t\t\tshop.isOfficial = shop.type === 'official';\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 合并数据\r\n\t\t\t\t\t\t\tif (refresh) {\r\n\t\t\t\t\t\t\t\tthis.shops = shopList;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.shops = [...this.shops, ...shopList];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.totalItems = data.total;\r\n\t\t\t\t\t\t\tthis.currentPage = data.current;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '获取数据失败',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('请求失败:', err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\tthis.loadingMore = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 搜索店铺\r\n\t\t\tsearchShops() {\r\n\t\t\t\tthis.loadShops(true);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 选择分类\r\n\t\t\tselectCategory(categoryId) {\r\n\t\t\t\tthis.selectedCategoryId = categoryId;\r\n\t\t\t\tthis.searchText = '';\r\n\t\t\t\tthis.loadShops(true);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 加载更多\r\n\t\t\tloadMore() {\r\n\t\t\t\tif (!this.loadingMore && this.hasMore) {\r\n\t\t\t\t\tthis.currentPage++;\r\n\t\t\t\t\tthis.loadShops(false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 查看店铺详情\r\n\t\t\tviewShopDetail(shop, index) {\r\n\t\t\t\tconsole.log('全部店铺列表:', JSON.stringify(this.shops));\r\n\t\t\t\tconsole.log('点击的索引:', index);\r\n\t\t\t\tconsole.log('店铺信息:', shop ? JSON.stringify(shop) : 'undefined');\r\n\t\t\t\t\r\n\t\t\t\tif (!shop) {\r\n\t\t\t\t\t// 尝试从shops数组中获取对应索引的店铺\r\n\t\t\t\t\tif (index !== undefined && this.shops && this.shops.length > index) {\r\n\t\t\t\t\t\tshop = this.shops[index];\r\n\t\t\t\t\t\tconsole.log('从数组重新获取的店铺:', JSON.stringify(shop));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺信息无效',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 检查ID是否存在\r\n\t\t\t\tconst shopId = shop.id;\r\n\t\t\t\t\r\n\t\t\t\tif (!shopId) {\r\n\t\t\t\t\tconsole.error('店铺ID不存在:', shop);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '店铺ID无效',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('导航到店铺详情，ID:', shopId);\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/mall/shops/detail?id=${shopId}`,\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('导航失败:', err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '跳转失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 直接导航到店铺详情页面（使用ID直接导航）\r\n\t\t\tdirectNavigate(id) {\r\n\t\t\t\tif (!id) {\r\n\t\t\t\t\tconsole.error('直接导航：ID无效');\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '店铺ID无效',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('直接导航到店铺，ID:', id);\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/mall/shops/detail?id=${id}`,\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('导航失败:', err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '跳转失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgoBack() {\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1,\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t// If there's no page to go back to, navigate to mall index\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pages/mall/index'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 下拉刷新\r\n\t\tonPullDownRefresh() {\r\n\t\t\tthis.loadShops();\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tuni.stopPullDownRefresh();\r\n\t\t\t}, 1000);\r\n\t\t},\r\n\t\t\r\n\t\t// 上拉加载更多\r\n\t\tonReachBottom() {\r\n\t\t\tthis.loadMore();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.container {\r\n\t\tbackground-color: #F8F7F2;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\t\r\n\t.back-button {\r\n\t\tposition: fixed;\r\n\t\ttop: calc(var(--status-bar-height) + 50rpx);\r\n\t\tleft: 30rpx;\r\n\t\tz-index: 1000;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground-color: rgba(255, 255, 255, 0.8);\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tborder-radius: 30rpx;\r\n\t\tbox-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.1);\r\n\t\tborder: 1rpx solid #e0c9d1;\r\n\t}\r\n\t\r\n\t.back-arrow {\r\n\t\tfont-size: 40rpx;\r\n\t\tcolor: #8A3324;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\t\r\n\t.back-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-family: \"FangSong\", serif;\r\n\t}\r\n\t\r\n\t.header {\r\n\t\tpadding: 20rpx 30rpx;\r\n\t}\r\n\t\r\n\t.search-box {\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.search-input-wrapper {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 30rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t\tborder: 1rpx solid #e0c9d1;\r\n\t}\r\n\t\r\n\t.search-icon {\r\n\t\twidth: 32rpx;\r\n\t\theight: 32rpx;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\t\r\n\t.search-input {\r\n\t\tflex: 1;\r\n\t\tborder: none;\r\n\t\tbackground: transparent;\r\n\t\tfont-size: 28rpx;\r\n\t\tpadding: 16rpx 0;\r\n\t\toutline: none;\r\n\t}\r\n\t\r\n\t.categories {\r\n\t\tdisplay: flex;\r\n\t\toverflow-x: auto;\r\n\t\twhite-space: nowrap;\r\n\t\tpadding: 0 30rpx 20rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.category-item {\r\n\t\tdisplay: inline-block;\r\n\t\tpadding: 10rpx 30rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 30rpx;\r\n\t\tborder: 1rpx solid #e0c9d1;\r\n\t}\r\n\t\r\n\t.category-item.active {\r\n\t\tbackground: rgba(138, 51, 36, 0.1);\r\n\t\tborder-color: #8A3324;\r\n\t}\r\n\t\r\n\t.category-text {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\t\r\n\t.category-item.active .category-text {\r\n\t\tcolor: #8A3324;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t/* 加载状态 */\r\n\t.loading-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 60rpx 0;\r\n\t}\r\n\t\r\n\t.loading-spinner {\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tborder: 6rpx solid #f3f3f3;\r\n\t\tborder-top: 6rpx solid #7EC4CF;\r\n\t\tborder-radius: 50%;\r\n\t\tanimation: spin 1s linear infinite;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.loading-spinner.small {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tborder-width: 4rpx;\r\n\t}\r\n\t\r\n\t@keyframes spin {\r\n\t\t0% { transform: rotate(0deg); }\r\n\t\t100% { transform: rotate(360deg); }\r\n\t}\r\n\t\r\n\t.loading-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.empty-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 80rpx 0;\r\n\t}\r\n\t\r\n\t.empty-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t/* 店铺列表 */\r\n\t.shop-list {\r\n\t\theight: calc(100vh - 350rpx);\r\n\t\tpadding: 0 30rpx;\r\n\t}\r\n\t\r\n\t.shop-card {\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 15rpx;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\t\tborder: 1rpx solid #e0c9d1;\r\n\t}\r\n\t\r\n\t.shop-image {\r\n\t\twidth: 180rpx;\r\n\t\theight: 180rpx;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\t\r\n\t.shop-info {\r\n\t\tflex: 1;\r\n\t\tpadding: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t\r\n\t.shop-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: flex-start;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\t\r\n\t.shop-name {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-family: \"FangSong\", serif;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.shop-badges {\r\n\t\tdisplay: flex;\r\n\t}\r\n\t\r\n\t.shop-badge {\r\n\t\tfont-size: 20rpx;\r\n\t\tpadding: 2rpx 8rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\t\r\n\t.shop-badge.official {\r\n\t\tbackground-color: rgba(126, 196, 207, 0.1);\r\n\t\tcolor: #7EC4CF;\r\n\t\tborder: 1rpx solid #7EC4CF;\r\n\t}\r\n\t\r\n\t.shop-badge.new {\r\n\t\tbackground-color: rgba(138, 51, 36, 0.1);\r\n\t\tcolor: #8A3324;\r\n\t\tborder: 1rpx solid #8A3324;\r\n\t}\r\n\t\r\n\t.shop-description {\r\n\t\tflex: 1;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\t\r\n\t.description-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #666;\r\n\t\tline-height: 1.5;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\t-webkit-line-clamp: 2;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.shop-footer {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.shop-rating {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.rating-score {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #FF9500;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-right: 6rpx;\r\n\t}\r\n\t\r\n\t.rating-stars {\r\n\t\tdisplay: flex;\r\n\t\tmargin-right: 6rpx;\r\n\t}\r\n\t\r\n\t.star {\r\n\t\tcolor: #DDDDDD;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\t\r\n\t.star.active {\r\n\t\tcolor: #FF9500;\r\n\t}\r\n\t\r\n\t.rating-count {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.shop-enter {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #7EC4CF;\r\n\t}\r\n\t\r\n\t.load-more, .no-more {\r\n\t\ttext-align: center;\r\n\t\tpadding: 30rpx 0;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n</style> ","import mod from \"-!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1749278543103\n      var cssReload = require(\"C:/App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}