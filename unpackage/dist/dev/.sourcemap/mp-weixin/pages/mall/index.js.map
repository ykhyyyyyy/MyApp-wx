{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/mall/index.vue?4fb8","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/mall/index.vue?d25a","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/mall/index.vue?f579","uni-app:///pages/mall/index.vue","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/mall/index.vue?fe84","webpack:///C:/Users/ykh/Desktop/MyApp-wx/pages/mall/index.vue?1924"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","AiAssistant","CustomNavBar","data","loading","loadingMore","searchText","currentPage","pageSize","totalItems","selectedCategoryId","selectedCategoryName","shops","computed","hasMore","onLoad","methods","loadShops","current","size","params","uni","url","method","header","success","console","shopList","shop","title","icon","fail","complete","searchShops","name","page","selectCategory","loadMore","viewShopDetail","directNavigate","goBack","delta","onPullDownRefresh","setTimeout","onReachBottom"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AAC6K;AAC7K,gBAAgB,iLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7BA;AAAA;AAAA;AAAA;AAAopB,CAAgB,moBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC4GxqB;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IAEA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MAAA;MACA;QACA;QACA;QACA;MACA;QACA;MACA;;MAEA;MACA;QACAC;QACAC;MACA;;MAEA;MACA;QACAC;MACA;;MAEA;MACAC;QACAC;QACAC;QACApB;QACAqB;UACA;QACA;QACAC;UACAC;UACA;YACA;;YAEA;YACA;YACAA;;YAEA;YACAC;cACAD;;cAEA;cACA;gBACA;gBACA;gBACA;gBACA;gBACAE;cACA;;cAEA;cACA;gBACAA;cACA;;cAEA;cACAA;YACA;;YAEA;YACA;cACA;YACA;cACA;YACA;YAEA;YACA;YAEAF;UACA;YACAA;YACAL;cACAQ;cACAC;YACA;UACA;QACA;QACAC;UACAL;UACAL;YACAQ;YACAC;UACA;QACA;QACAE;UACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;MAEA;MACA;MAEAZ;QACAC;QACAC;QACApB;UACA+B;UACAC;UACA3B;QACA;QACAgB;UACA;QACA;QACAC;UACAC;UACA;YACA;;YAEA;YACA;;YAEA;YACAC;cACA;cACA;gBACA;gBACA;gBACA;gBACA;gBACAC;cACA;;cAEA;cACAA;YACA;YAEA;YACA;;YAEA;YACA;UACA;YACAP;cACAQ;cACAC;YACA;UACA;QACA;QACAC;UACAL;UACAL;YACAQ;YACAC;UACA;QACA;QACAE;UACA;QACA;MACA;IACA;IAEA;IACAI;MACA;MACA;QACA;QACA;MACA;QACA;QACA;QACA;UAAA;QAAA;QACA;MACA;;MAEA;MACA;;MAEA;MACA;IACA;IAEA;IACAC;MACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACAZ;MACAA;MACAA;MAEA;QACA;QACA;UACAE;UACAF;QACA;UACAL;YACAQ;YACAC;UACA;UACA;QACA;MACA;;MAEA;MACA;MAEA;QACAJ;QACAL;UACAQ;UACAC;QACA;QACA;MACA;MAEAJ;MACAL;QACAC;QACAS;UACAL;UACAL;YACAQ;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAS;MACA;QACAb;QACAL;UACAQ;UACAC;QACA;QACA;MACA;MAEAJ;MACAL;QACAC;QACAS;UACAL;UACAL;YACAQ;YACAC;UACA;QACA;MACA;IACA;IAEAU;MACAnB;QACAoB;QACAV;UACA;UACAV;YACAC;UACA;QACA;MACA;IACA;EACA;EACA;EACAoB;IACA;IACAC;MACAtB;IACA;EACA;EAEA;EACAuB;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzaA;AAAA;AAAA;AAAA;AAA27B,CAAgB,g4BAAG,EAAC,C;;;;;;;;;;;ACA/8B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/mall/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/mall/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=4ac82a60&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/mall/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=4ac82a60&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !_vm.loading ? _vm.shops.length === 0 && !_vm.loading : null\n  var l0 =\n    !_vm.loading && !g0\n      ? _vm.__map(_vm.shops, function (shop, index) {\n          var $orig = _vm.__get_orig(shop)\n          var g1 = Math.floor(shop.rating || 5)\n          return {\n            $orig: $orig,\n            g1: g1,\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"container\">\n\t\t<!-- 使用自定义导航栏组件 -->\n\t\t<custom-nav-bar title=\"锦绣商阁\" subtitle=\"校园精品汇\" :show-back=\"true\"></custom-nav-bar>\n\t\t\n\t\t<!-- 添加明显的返回按钮 -->\n\t\t<view class=\"back-button\" @click=\"goBack\">\n\t\t\t<text class=\"back-arrow\">←</text>\n\t\t\t<text class=\"back-text\">返回</text>\n\t\t</view>\n\t\t\n\t\t<view class=\"header\">\n\t\t\t<view class=\"search-box\">\n\t\t\t\t<view class=\"search-input-wrapper\">\n\t\t\t\t\t<image src=\"https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg\" class=\"search-icon\"></image>\n\t\t\t\t\t<input class=\"search-input\" type=\"text\" v-model=\"searchText\" placeholder=\"搜索店铺\" @confirm=\"searchShops\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"banner\">\n\t\t\t<swiper circular autoplay interval=\"3000\" indicator-dots class=\"mall-swiper\">\n\t\t\t\t<swiper-item>\n\t\t\t\t\t<image src=\"https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg\" mode=\"aspectFill\" class=\"banner-image\"></image>\n\t\t\t\t</swiper-item>\n\t\t\t\t<swiper-item>\n\t\t\t\t\t<image src=\"https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg\" mode=\"aspectFill\" class=\"banner-image\"></image>\n\t\t\t\t</swiper-item>\n\t\t\t</swiper>\n\t\t</view>\n\t\t\n\t\t<view class=\"categories\">\n\t\t\t<view class=\"category-item\" v-for=\"(category, index) in categories\" :key=\"index\" @click=\"selectCategory(category.id)\">\n\t\t\t\t<image :src=\"category.icon\" class=\"category-icon\"></image>\n\t\t\t\t<text class=\"category-text\">{{category.name}}</text>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 显示加载中状态 -->\n\t\t<view v-if=\"loading\" class=\"loading-container\">\n\t\t\t<view class=\"loading-spinner\"></view>\n\t\t\t<text class=\"loading-text\">加载中...</text>\n\t\t</view>\n\t\t\n\t\t<!-- 显示无数据状态 -->\n\t\t<view v-else-if=\"shops.length === 0 && !loading\" class=\"empty-container\">\n\t\t\t<text class=\"empty-text\">暂无店铺数据</text>\n\t\t</view>\n\t\t\n\t\t<!-- 店铺展示区域 -->\n\t\t<view v-else>\n\t\t\t<!-- 所有店铺 -->\n\t\t\t<view class=\"section\">\n\t\t\t\t<view class=\"section-header\">\n\t\t\t\t\t<image class=\"section-title-decoration\" src=\"https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg\" mode=\"aspectFit\"></image>\n\t\t\t\t\t<text class=\"section-title\">{{ selectedCategoryName ? selectedCategoryName : '精品店铺' }}</text>\n\t\t\t\t\t<image class=\"section-title-decoration\" src=\"https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg\" mode=\"aspectFit\"></image>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"shop-list\">\n\t\t\t\t\t<view class=\"shop-card-horizontal\" v-for=\"(shop, index) in shops\" :key=\"shop.id || index\" @click=\"viewShopDetail(shop, index)\">\n\t\t\t\t\t\t<image class=\"shop-image-small\" :src=\"shop.avatar || shop.logo || 'https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg'\" mode=\"aspectFill\" @click.stop=\"directNavigate(shop.id)\"></image>\n\t\t\t\t\t\t<view class=\"shop-info-horizontal\">\n\t\t\t\t\t\t\t<view class=\"shop-header\">\n\t\t\t\t\t\t\t\t<text class=\"shop-name\" @click.stop=\"directNavigate(shop.id)\">{{shop.name || '未命名店铺'}}</text>\n\t\t\t\t\t\t\t\t<view class=\"shop-badges\">\n\t\t\t\t\t\t\t\t\t<text v-if=\"shop.isOfficial\" class=\"shop-badge official\">官方</text>\n\t\t\t\t\t\t\t\t\t<text v-if=\"shop.isNew\" class=\"shop-badge new\">新店</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<view class=\"shop-description\">\n\t\t\t\t\t\t\t\t<text class=\"description-text\">{{shop.description || '暂无描述'}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<view class=\"shop-footer\">\n\t\t\t\t\t\t\t\t<view class=\"shop-rating\">\n\t\t\t\t\t\t\t\t\t<text class=\"rating-score\">{{shop.rating || '5.0'}}</text>\n\t\t\t\t\t\t\t\t\t<view class=\"rating-stars\">\n\t\t\t\t\t\t\t\t\t\t<text v-for=\"n in 5\" :key=\"n\" class=\"star\" :class=\"{ active: n <= Math.floor(shop.rating || 5) }\">★</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<text class=\"rating-count\">{{shop.ratingCount || 0}}条评价</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<text class=\"shop-enter\" @click.stop=\"directNavigate(shop.id)\">进店 ></text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 加载更多 -->\n\t\t\t\t<view v-if=\"hasMore\" class=\"load-more\" @click=\"loadMore\">\n\t\t\t\t\t<text v-if=\"!loadingMore\">加载更多</text>\n\t\t\t\t\t<view v-else class=\"loading-spinner small\"></view>\n\t\t\t\t</view>\n\t\t\t\t<view v-else class=\"no-more\">\n\t\t\t\t\t<text>没有更多店铺了</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- AI助手组件 -->\n\t\t<ai-assistant></ai-assistant>\n\t</view>\n</template>\n\n<script>\n\timport AiAssistant from '@/components/AiAssistant.vue';\n\timport CustomNavBar from '@/components/CustomNavBar.vue';\n\timport config from '@/config/index.js';\n\t\n\texport default {\n\t\tcomponents: {\n\t\t\tAiAssistant,\n\t\t\tCustomNavBar\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tloading: false,\n\t\t\t\tloadingMore: false,\n\t\t\t\tsearchText: '',\n\t\t\t\tcurrentPage: 1,\n\t\t\t\tpageSize: 10,\n\t\t\t\ttotalItems: 0,\n\t\t\t\tselectedCategoryId: null,\n\t\t\t\tselectedCategoryName: '',\n\t\t\t\tshops: [],\n\t\t\t\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\thasMore() {\n\t\t\t\treturn this.shops.length < this.totalItems;\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\t// 页面加载时获取数据\n\t\t\tthis.loadShops();\n\t\t},\n\t\tmethods: {\n\t\t\t// 加载店铺数据\n\t\t\tloadShops(refresh = true) {\n\t\t\t\tif (refresh) {\n\t\t\t\t\tthis.currentPage = 1;\n\t\t\t\t\tthis.loading = true;\n\t\t\t\t\tthis.shops = [];\n\t\t\t\t} else {\n\t\t\t\t\tthis.loadingMore = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 构建查询参数\n\t\t\t\tconst params = {\n\t\t\t\t\tcurrent: this.currentPage,\n\t\t\t\t\tsize: this.pageSize\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 如果选择了分类，添加分类ID\n\t\t\t\tif (this.selectedCategoryId) {\n\t\t\t\t\tparams.categoryId = this.selectedCategoryId;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 发起API请求\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${config.BaseUrl}/api/shop/page`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: params,\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log('获取店铺数据响应:', JSON.stringify(res.data));\n\t\t\t\t\t\tif (res.data && res.data.code === 1 && res.data.data) {\n\t\t\t\t\t\t\tconst data = res.data.data;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 处理店铺数据\n\t\t\t\t\t\t\tconst shopList = data.records || [];\n\t\t\t\t\t\t\tconsole.log(`获取到${shopList.length}个店铺`);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 为每个店铺添加isNew和isOfficial标识\n\t\t\t\t\t\t\tshopList.forEach((shop, index) => {\n\t\t\t\t\t\t\t\tconsole.log(`店铺 ${index + 1}:`, JSON.stringify(shop));\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 如果创建时间在30天内，标记为新店\n\t\t\t\t\t\t\t\tif (shop.createdTime) {\n\t\t\t\t\t\t\t\t\tconst createDate = new Date(shop.createdTime);\n\t\t\t\t\t\t\t\t\tconst now = new Date();\n\t\t\t\t\t\t\t\t\tconst diffTime = Math.abs(now - createDate);\n\t\t\t\t\t\t\t\t\tconst diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\t\t\t\t\t\t\t\t\tshop.isNew = diffDays <= 30;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 设置默认评分为5.0\n\t\t\t\t\t\t\t\tif (!shop.rating) {\n\t\t\t\t\t\t\t\t\tshop.rating = 5.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 根据店铺类型标记是否为官方店铺\n\t\t\t\t\t\t\t\tshop.isOfficial = shop.type === 'official';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 合并数据\n\t\t\t\t\t\t\tif (refresh) {\n\t\t\t\t\t\t\t\tthis.shops = shopList;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.shops = [...this.shops, ...shopList];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.totalItems = data.total || 0;\n\t\t\t\t\t\t\tthis.currentPage = data.current || 1;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconsole.log(`已加载${this.shops.length}个店铺，总共${this.totalItems}个`);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error('获取店铺数据失败:', res.data);\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '获取数据失败',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('请求失败:', err);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\tthis.loadingMore = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 搜索店铺\n\t\t\tsearchShops() {\n\t\t\t\tif (!this.searchText.trim()) {\n\t\t\t\t\t// 如果搜索框为空，重置搜索条件并加载所有店铺\n\t\t\t\t\tthis.selectedCategoryId = null;\n\t\t\t\t\tthis.selectedCategoryName = '';\n\t\t\t\t\tthis.loadShops();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.loading = true;\n\t\t\t\tthis.shops = [];\n\t\t\t\t\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${config.BaseUrl}/api/shop/search`,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tname: this.searchText,\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\tpageSize: 20\n\t\t\t\t\t},\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log('搜索店铺成功:', res.data);\n\t\t\t\t\t\tif (res.data && res.data.code === 1) {\n\t\t\t\t\t\t\tconst data = res.data.data;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 处理店铺数据\n\t\t\t\t\t\t\tconst shopList = data.records || [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 为每个店铺添加isNew和isOfficial标识\n\t\t\t\t\t\t\tshopList.forEach(shop => {\n\t\t\t\t\t\t\t\t// 如果创建时间在30天内，标记为新店\n\t\t\t\t\t\t\t\tif (shop.createdTime) {\n\t\t\t\t\t\t\t\t\tconst createDate = new Date(shop.createdTime);\n\t\t\t\t\t\t\t\t\tconst now = new Date();\n\t\t\t\t\t\t\t\t\tconst diffTime = Math.abs(now - createDate);\n\t\t\t\t\t\t\t\t\tconst diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\t\t\t\t\t\t\t\t\tshop.isNew = diffDays <= 30;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 根据店铺类型标记是否为官方店铺\n\t\t\t\t\t\t\t\tshop.isOfficial = shop.type === 'official';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.shops = shopList;\n\t\t\t\t\t\t\tthis.totalItems = data.total || this.shops.length;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 更新标题\n\t\t\t\t\t\t\tthis.selectedCategoryName = `\"${this.searchText}\" 的搜索结果`;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '搜索失败',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('请求失败:', err);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 选择分类\n\t\t\tselectCategory(categoryId) {\n\t\t\t\t// 如果点击的是已选中的分类，则取消选择\n\t\t\t\tif (this.selectedCategoryId === categoryId) {\n\t\t\t\t\tthis.selectedCategoryId = null;\n\t\t\t\t\tthis.selectedCategoryName = '';\n\t\t\t\t} else {\n\t\t\t\t\tthis.selectedCategoryId = categoryId;\n\t\t\t\t\t// 设置分类名称\n\t\t\t\t\tconst category = this.categories.find(c => c.id === categoryId);\n\t\t\t\t\tthis.selectedCategoryName = category ? category.name : '';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 重置搜索文本\n\t\t\t\tthis.searchText = '';\n\t\t\t\t\n\t\t\t\t// 重新加载店铺\n\t\t\t\tthis.loadShops();\n\t\t\t},\n\t\t\t\n\t\t\t// 加载更多\n\t\t\tloadMore() {\n\t\t\t\tif (!this.loadingMore && this.hasMore) {\n\t\t\t\t\tthis.currentPage++;\n\t\t\t\t\tthis.loadShops(false);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 查看店铺详情\n\t\t\tviewShopDetail(shop, index) {\n\t\t\t\tconsole.log('全部店铺列表:', JSON.stringify(this.shops));\n\t\t\t\tconsole.log('点击的索引:', index);\n\t\t\t\tconsole.log('店铺信息:', shop ? JSON.stringify(shop) : 'undefined');\n\t\t\t\t\n\t\t\t\tif (!shop) {\n\t\t\t\t\t// 尝试从shops数组中获取对应索引的店铺\n\t\t\t\t\tif (index !== undefined && this.shops && this.shops.length > index) {\n\t\t\t\t\t\tshop = this.shops[index];\n\t\t\t\t\t\tconsole.log('从数组重新获取的店铺:', JSON.stringify(shop));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '店铺信息无效',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 检查ID是否存在\n\t\t\t\tconst shopId = shop.id;\n\t\t\t\t\n\t\t\t\tif (!shopId) {\n\t\t\t\t\tconsole.error('店铺ID不存在:', shop);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '店铺ID无效',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('导航到店铺详情，ID:', shopId);\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/pages/mall/shops/detail?id=${shopId}`,\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('导航失败:', err);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '跳转失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 直接导航到店铺详情页面（使用ID直接导航）\n\t\t\tdirectNavigate(id) {\n\t\t\t\tif (!id) {\n\t\t\t\t\tconsole.error('直接导航：ID无效');\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '店铺ID无效',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('直接导航到店铺，ID:', id);\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/pages/mall/shops/detail?id=${id}`,\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('导航失败:', err);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '跳转失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\tgoBack() {\n\t\t\t\tuni.navigateBack({\n\t\t\t\t\tdelta: 1,\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t// If there's no page to go back to, navigate to home\n\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\turl: '/pages/index/index'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// 下拉刷新\n\t\tonPullDownRefresh() {\n\t\t\tthis.loadShops();\n\t\t\tsetTimeout(() => {\n\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t}, 1000);\n\t\t},\n\t\t\n\t\t// 上拉加载更多\n\t\tonReachBottom() {\n\t\t\tthis.loadMore();\n\t\t}\n\t}\n</script>\n\n<style>\n\t.container {\n\t\tbackground-color: #F8F7F2;\n\t\tmin-height: 100vh;\n\t}\n\t\n\t/* 自定义中国风导航栏 */\n\t.custom-nav {\n\t\tposition: relative;\n\t\theight: 180rpx;\n\t\tpadding-top: var(--status-bar-height);\n\t\toverflow: hidden;\n\t}\n\t\n\t.nav-bg {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tz-index: 1;\n\t}\n\t\n\t.nav-content {\n\t\tposition: relative;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tz-index: 2;\n\t}\n\t\n\t.nav-title {\n\t\tfont-family: \"FangSong\", serif;\n\t\tfont-size: 40rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #333;\n\t\ttext-shadow: 2rpx 2rpx 4rpx rgba(255, 255, 255, 0.6);\n\t}\n\t\n\t.nav-subtitle {\n\t\tfont-size: 20rpx;\n\t\tcolor: #666;\n\t\tmargin-top: 4rpx;\n\t}\n\t\n\t.header {\n\t\tpadding: 20rpx 30rpx;\n\t}\n\t\n\t.search-input-wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbackground: #fff;\n\t\tborder-radius: 30rpx;\n\t\tpadding: 0 20rpx;\n\t\tborder: 1rpx solid #e0c9d1;\n\t}\n\t\n\t.search-icon {\n\t\twidth: 32rpx;\n\t\theight: 32rpx;\n\t\tmargin-right: 10rpx;\n\t}\n\t\n\t.search-input {\n\t\tflex: 1;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tfont-size: 28rpx;\n\t\tpadding: 16rpx 0;\n\t\toutline: none;\n\t}\n\t\n\t.banner {\n\t\tmargin: 0 30rpx 30rpx;\n\t}\n\t\n\t.mall-swiper {\n\t\theight: 300rpx;\n\t\tborder-radius: 15rpx;\n\t\toverflow: hidden;\n\t}\n\t\n\t.banner-image {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t\n\t.categories {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\tmargin: 0 30rpx 40rpx;\n\t}\n\t\n\t.category-item {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\twidth: 25%;\n\t}\n\t\n\t.category-icon {\n\t\twidth: 80rpx;\n\t\theight: 80rpx;\n\t\tmargin-bottom: 10rpx;\n\t}\n\t\n\t.category-text {\n\t\tfont-size: 26rpx;\n\t\tcolor: #333;\n\t}\n\t\n\t.content {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tpadding: 50rpx 30rpx;\n\t}\n\t\n\t.placeholder-text {\n\t\tfont-size: 30rpx;\n\t\tcolor: #999;\n\t\ttext-align: center;\n\t}\n\t\n\t.section {\n\t\tmargin: 0 30rpx 30rpx;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 15rpx;\n\t\tpadding: 30rpx;\n\t\tbox-shadow: 0 4rpx 8rpx rgba(0,0,0,0.05);\n\t\tborder: 1rpx solid #e0c9d1;\n\t}\n\t\n\t.section-header {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding-bottom: 20rpx;\n\t\tborder-bottom: 1rpx solid #f0f0f0;\n\t}\n\t\n\t.section-title-decoration {\n\t\twidth: 24rpx;\n\t\theight: 24rpx;\n\t\tmargin: 0 10rpx;\n\t}\n\t\n\t.section-title {\n\t\tfont-family: \"FangSong\", serif;\n\t\tfont-size: 32rpx;\n\t\tcolor: #333;\n\t\tfont-weight: bold;\n\t}\n\t\n\t.shop-grid {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmargin: 0 -10rpx;\n\t}\n\t\n\t.shop-card {\n\t\twidth: calc(50% - 20rpx);\n\t\tmargin: 10rpx;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 10rpx;\n\t\toverflow: hidden;\n\t\tbox-shadow: 0 2rpx 6rpx rgba(0,0,0,0.05);\n\t\tborder: 1rpx solid #f0f0f0;\n\t}\n\t\n\t.shop-image {\n\t\twidth: 100%;\n\t\theight: 150rpx;\n\t}\n\t\n\t.shop-info {\n\t\tpadding: 15rpx;\n\t}\n\t\n\t.shop-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\t\n\t.shop-card-horizontal {\n\t\tdisplay: flex;\n\t\tmargin-bottom: 20rpx;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 10rpx;\n\t\tbox-shadow: 0 2rpx 6rpx rgba(0,0,0,0.05);\n\t\tborder: 1rpx solid #f0f0f0;\n\t\toverflow: hidden;\n\t}\n\t\n\t.shop-image-small {\n\t\twidth: 180rpx;\n\t\theight: 180rpx;\n\t\tflex-shrink: 0;\n\t}\n\t\n\t.shop-info-horizontal {\n\t\tflex: 1;\n\t\tpadding: 15rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\t\n\t.shop-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-start;\n\t\tmargin-bottom: 10rpx;\n\t}\n\t\n\t.shop-name {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\tfont-family: \"FangSong\", serif;\n\t\tfont-weight: bold;\n\t}\n\t\n\t.shop-badges {\n\t\tdisplay: flex;\n\t}\n\t\n\t.shop-badge {\n\t\tfont-size: 20rpx;\n\t\tpadding: 2rpx 8rpx;\n\t\tborder-radius: 6rpx;\n\t\tmargin-left: 10rpx;\n\t}\n\t\n\t.shop-badge.official {\n\t\tbackground-color: rgba(126, 196, 207, 0.1);\n\t\tcolor: #7EC4CF;\n\t\tborder: 1rpx solid #7EC4CF;\n\t}\n\t\n\t.shop-badge.new {\n\t\tbackground-color: rgba(138, 51, 36, 0.1);\n\t\tcolor: #8A3324;\n\t\tborder: 1rpx solid #8A3324;\n\t}\n\t\n\t.shop-description {\n\t\tflex: 1;\n\t\tmargin-bottom: 10rpx;\n\t}\n\t\n\t.description-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #666;\n\t\tline-height: 1.5;\n\t\tdisplay: -webkit-box;\n\t\t-webkit-box-orient: vertical;\n\t\t-webkit-line-clamp: 2;\n\t\toverflow: hidden;\n\t}\n\t\n\t.shop-footer {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\t\n\t.shop-rating {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t\n\t.rating-score {\n\t\tfont-size: 24rpx;\n\t\tcolor: #FF9500;\n\t\tfont-weight: bold;\n\t\tmargin-right: 6rpx;\n\t}\n\t\n\t.rating-stars {\n\t\tdisplay: flex;\n\t\tmargin-right: 6rpx;\n\t}\n\t\n\t.star {\n\t\tcolor: #DDDDDD;\n\t\tfont-size: 24rpx;\n\t}\n\t\n\t.star.active {\n\t\tcolor: #FF9500;\n\t}\n\t\n\t.rating-count {\n\t\tfont-size: 20rpx;\n\t\tcolor: #999;\n\t}\n\t\n\t.shop-enter {\n\t\tfont-size: 24rpx;\n\t\tcolor: #7EC4CF;\n\t}\n\t\n\t.back-button {\n\t\tposition: fixed;\n\t\ttop: calc(var(--status-bar-height) + 50rpx);\n\t\tleft: 30rpx;\n\t\tz-index: 1000;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbackground-color: rgba(255, 255, 255, 0.8);\n\t\tpadding: 10rpx 20rpx;\n\t\tborder-radius: 30rpx;\n\t\tbox-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.1);\n\t\tborder: 1rpx solid #e0c9d1;\n\t}\n\t\n\t.back-arrow {\n\t\tfont-size: 40rpx;\n\t\tcolor: #8A3324;\n\t\tfont-weight: bold;\n\t\tmargin-right: 10rpx;\n\t}\n\t\n\t.back-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\tfont-family: \"FangSong\", serif;\n\t}\n\t\n\t/* 加载状态 */\n\t.loading-container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 60rpx 0;\n\t}\n\t\n\t.loading-spinner {\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tborder: 6rpx solid #f3f3f3;\n\t\tborder-top: 6rpx solid #7EC4CF;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.loading-spinner.small {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t\tborder-width: 4rpx;\n\t}\n\t\n\t@keyframes spin {\n\t\t0% { transform: rotate(0deg); }\n\t\t100% { transform: rotate(360deg); }\n\t}\n\t\n\t.loading-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #999;\n\t}\n\t\n\t.empty-container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 80rpx 0;\n\t}\n\t\n\t.empty-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #999;\n\t}\n\t\n\t.load-more, .no-more {\n\t\ttext-align: center;\n\t\tpadding: 30rpx 0;\n\t\tfont-size: 26rpx;\n\t\tcolor: #999;\n\t}\n</style> ","import mod from \"-!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../App/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1749278873938\n      var cssReload = require(\"C:/App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}