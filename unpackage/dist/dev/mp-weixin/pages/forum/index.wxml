<view class="container"><custom-nav-bar vue-id="5be983eb-1" title="论坛" subtitle="Community" show-back="{{false}}" show-seal="{{true}}" bind:__l="__l"></custom-nav-bar><view class="search-section"><view class="search-input-wrapper"><text class="iconfont icon-search search-icon"></text><input class="search-input" type="text" placeholder="搜索帖子..." data-event-opts="{{[['confirm',[['handleSearch',['$event']]]],['input',[['__set_model',['','searchText','$event',[]]]]]]}}" value="{{searchText}}" bindconfirm="__e" bindinput="__e"/></view><button data-event-opts="{{[['tap',[['goToCreate',['$event']]]]]}}" class="publish-btn" bindtap="__e">发帖</button></view><scroll-view class="categories-scroll" scroll-x="{{true}}"><view data-event-opts="{{[['tap',[['selectCategory',['']]]]]}}" class="{{['category-item',(!activeCategory)?'active':'']}}" bindtap="__e">全部</view><block wx:for="{{categories}}" wx:for-item="category" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectCategory',['$0'],[[['categories','',index]]]]]]]}}" class="{{['category-item',(activeCategory===category)?'active':'']}}" bindtap="__e">{{''+category+''}}</view></block></scroll-view><view class="hot-section"><view class="section-header"><text class="section-title">热门推荐</text><text class="section-more">查看更多</text></view><scroll-view class="hot-list" scroll-x="{{true}}"><block wx:for="{{$root.l0}}" wx:for-item="hot" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({hot:hot.$orig})}}" class="hot-item" bindtap="__e"><view class="hot-banner"></view><view class="hot-content"><text class="hot-item-title">{{hot.$orig.title}}</text><block wx:if="{{hot.$orig.content}}"><text class="hot-desc">{{hot.g0+(hot.g1>30?'...':'')}}</text></block><view class="hot-meta"><text class="hot-user">{{hot.$orig.username||'匿名用户'}}</text><text class="hot-views">{{(hot.$orig.views||0)+"浏览"}}</text></view></view></view></block></scroll-view></view><view class="post-section"><view class="section-header"><text class="section-title">最新帖子</text><view class="sort-actions"><text data-event-opts="{{[['tap',[['toggleSort',[false]]]]]}}" class="{{['sort-item',(!orderByHot)?'active':'']}}" bindtap="__e">最新</text><text class="sort-divider">|</text><text data-event-opts="{{[['tap',[['toggleSort',[true]]]]]}}" class="{{['sort-item',(orderByHot)?'active':'']}}" bindtap="__e">最热</text></view></view><scroll-view class="post-list" scroll-y="{{true}}" refresher-enabled="{{true}}" refresher-triggered="{{refreshing}}" data-event-opts="{{[['scrolltolower',[['loadMore',['$event']]]],['refresherrefresh',[['onRefresh',['$event']]]]]}}" bindscrolltolower="__e" bindrefresherrefresh="__e"><block wx:if="{{$root.g2}}"><view class="loading"><uni-load-more vue-id="5be983eb-2" status="loading" content-text="加载中..." bind:__l="__l"></uni-load-more></view></block><block wx:else><block wx:if="{{$root.g3===0}}"><view class="empty"><image class="empty-image" src="/static/images/empty-posts.png" mode="aspectFit"></image><text class="empty-text">暂无帖子</text></view></block><block wx:else><view><block wx:for="{{posts}}" wx:for-item="post" wx:for-index="__i1__" wx:key="id"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" data-event-params="{{({post})}}" class="post-item" bindtap="__e"><view class="post-header"><text class="post-title">{{post.title}}</text><block wx:if="{{post.category}}"><text class="post-tag">{{post.category}}</text></block></view><text class="post-content">{{post.content}}</text><view class="post-footer"><view class="post-author"><image class="author-avatar" src="{{post.avatar||'/static/images/default-avatar.png'}}" mode="aspectFill"></image><text class="author-name">{{post.username||'匿名用户'}}</text></view><view class="post-stats"><view class="stat-item"><text class="iconfont icon-message"></text><text>{{post.comments||0}}</text></view><view class="stat-item"><text class="iconfont icon-view"></text><text>{{post.views||0}}</text></view></view></view></view></block></view></block></block><block wx:if="{{$root.g4}}"><uni-load-more vue-id="5be983eb-3" status="loading" content-text="加载中..." bind:__l="__l"></uni-load-more></block><block wx:if="{{$root.g5}}"><uni-load-more vue-id="5be983eb-4" status="noMore" content-text="没有更多了" bind:__l="__l"></uni-load-more></block></scroll-view></view></view>