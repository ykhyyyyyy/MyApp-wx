<view class="container"><custom-nav-bar vue-id="5329091f-1" title="{{'探店 - '+shopName}}" subtitle="探店评价" show-back="{{true}}" bind:__l="__l"></custom-nav-bar><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-button" bindtap="__e"><text class="back-arrow">←</text><text class="back-text">返回</text></view><view class="header-info"><text class="header-title">{{shopName+"的探店内容"}}</text><text class="header-subtitle">{{"共"+totalItems+"条探店体验"}}</text></view><view class="filter-options"><view data-event-opts="{{[['tap',[['setSort',['latest']]]]]}}" class="{{['filter-item',(sortType==='latest')?'active':'']}}" bindtap="__e"><text class="filter-text">最新</text></view><view data-event-opts="{{[['tap',[['setSort',['popular']]]]]}}" class="{{['filter-item',(sortType==='popular')?'active':'']}}" bindtap="__e"><text class="filter-text">热门</text></view><view data-event-opts="{{[['tap',[['setSort',['rating']]]]]}}" class="{{['filter-item',(sortType==='rating')?'active':'']}}" bindtap="__e"><text class="filter-text">好评</text></view></view><block wx:if="{{$root.g0}}"><view class="loading-container"><view class="loading-spinner"></view><text class="loading-text">加载中...</text></view></block><block wx:else><block wx:if="{{$root.g1===0}}"><view class="empty-container"><text class="empty-text">暂无探店内容</text><button data-event-opts="{{[['tap',[['createReview',['$event']]]]]}}" class="add-review-btn" bindtap="__e">写探店</button></view></block><block wx:else><view class="reviews-list"><block wx:for="{{$root.l1}}" wx:for-item="review" wx:for-index="index"><view data-event-opts="{{[['tap',[['viewReviewDetail',['$0'],[[['reviews','id||index',review.$orig.id||index,'id']]]]]]]}}" class="review-card" bindtap="__e"><view class="review-header"><view class="user-info"><image class="user-avatar" src="{{review.$orig.userAvatar||'https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg'}}" mode="aspectFill"></image><view class="user-details"><text class="user-name">{{review.$orig.userName||'匿名用户'}}</text><view class="review-rating"><block wx:for="{{5}}" wx:for-item="n" wx:for-index="__i0__" wx:key="*this"><text class="{{['star',(n<=review.g2)?'active':'']}}">★</text></block><text class="rating-text">{{(review.$orig.rating||0)+"分"}}</text></view></view></view><text class="review-time">{{review.m0}}</text></view><view class="review-content"><text class="review-title">{{review.$orig.title||'探店体验'}}</text><text class="review-text">{{review.$orig.content||'暂无内容'}}</text></view><block wx:if="{{review.g3}}"><view class="review-images"><block wx:for="{{review.l0}}" wx:for-item="img" wx:for-index="imgIndex" wx:key="imgIndex"><image class="review-image" src="{{img}}" mode="aspectFill" data-event-opts="{{[['tap',[['previewImage',['$0',imgIndex],[[['reviews','id||index',review.$orig.id||index,'images']]]]]]]}}" catchtap="__e"></image></block><block wx:if="{{review.g4>3}}"><view class="image-count">{{"+"+(review.g5-3)}}</view></block></view></block><view class="review-footer"><view data-event-opts="{{[['tap',[['likeReview',['$0',index],[[['reviews','id||index',review.$orig.id||index]]]]]]]}}" class="action-btn" catchtap="__e"><text class="{{['action-icon',(review.$orig.isLiked)?'active':'']}}">👍</text><text class="action-count">{{review.$orig.likeCount||0}}</text></view><view data-event-opts="{{[['tap',[['commentReview',['$0'],[[['reviews','id||index',review.$orig.id||index,'id']]]]]]]}}" class="action-btn" catchtap="__e"><text class="action-icon">💬</text><text class="action-count">{{review.$orig.commentCount||0}}</text></view><view data-event-opts="{{[['tap',[['shareReview',['$0'],[[['reviews','id||index',review.$orig.id||index,'id']]]]]]]}}" class="action-btn" catchtap="__e"><text class="action-icon">🔗</text><text class="action-text">分享</text></view></view></view></block><block wx:if="{{hasMore}}"><view data-event-opts="{{[['tap',[['loadMore',['$event']]]]]}}" class="load-more" bindtap="__e"><block wx:if="{{!loadingMore}}"><text>加载更多</text></block><block wx:else><view class="loading-spinner small"></view></block></view></block><block wx:else><view class="no-more"><text>没有更多探店内容了</text></view></block></view></block></block><view data-event-opts="{{[['tap',[['createReview',['$event']]]]]}}" class="add-review-floating" bindtap="__e"><text class="add-review-icon">+</text><text class="add-review-text">写探店</text></view><ai-assistant vue-id="5329091f-2" bind:__l="__l"></ai-assistant></view>