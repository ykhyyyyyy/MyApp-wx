<view class="container"><custom-nav-bar vue-id="c1c3f95e-1" title="åº—é“ºè¯¦æƒ…" subtitle="åº—é“ºå•†å“" show-back="{{true}}" bind:__l="__l"></custom-nav-bar><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-button" bindtap="__e"><text class="back-arrow">â†</text><text class="back-text">è¿”å›</text></view><block wx:if="{{loading&&!shop}}"><view class="loading-container"><view class="loading-spinner"></view><text class="loading-text">åŠ è½½ä¸­...</text></view></block><block wx:else><block wx:if="{{!shop}}"><view class="empty-container"><text class="empty-text">æœªæ‰¾åˆ°åº—é“º</text></view></block><block wx:else><block><view class="shop-info-card"><view class="shop-header"><image class="shop-logo" src="{{shop.avatar||shop.logo||'https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg'}}" mode="aspectFill"></image><view class="shop-details"><view class="shop-name-row"><text class="shop-name">{{shop.name}}</text><view class="shop-badges"><block wx:if="{{shop.isOfficial}}"><text class="shop-badge official">å®˜æ–¹</text></block><block wx:if="{{shop.isNew}}"><text class="shop-badge new">æ–°åº—</text></block></view></view><view class="shop-rating"><text class="rating-score">{{shop.rating||'5.0'}}</text><view class="rating-stars"><block wx:for="{{$root.l0}}" wx:for-item="n" wx:for-index="__i0__" wx:key="$orig"><text class="{{['star',(n.$orig<=n.g0)?'active':'']}}">â˜…</text></block></view><text class="rating-count">{{(shop.ratingCount||0)+"æ¡è¯„ä»·"}}</text></view><text class="shop-description">{{shop.description||'æš‚æ— æè¿°'}}</text></view></view></view><view class="shop-tabs"><view data-event-opts="{{[['tap',[['goToShopReviews',['$event']]]]]}}" class="shop-tab-item" bindtap="__e"><view class="tab-icon">ğŸ”</view><text class="tab-text">æ¢åº—</text></view><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="shop-tab-item" bindtap="__e"><view class="tab-icon">ğŸŸï¸</view><text class="tab-text">ä¼˜æƒ åˆ¸</text><block wx:if="{{$root.g1>0}}"><view class="tab-badge">{{$root.g2}}</view></block></view><view class="shop-tab-item active"><view class="tab-icon">ğŸ›ï¸</view><text class="tab-text">å•†å“</text></view><view class="shop-tab-item"><view class="tab-icon">ğŸª</view><text class="tab-text">åº—é“º</text></view></view><block wx:if="{{showCoupons}}"><view class="coupon-popup"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="coupon-popup-mask" bindtap="__e"></view><view class="coupon-popup-content"><view class="coupon-popup-header"><text class="coupon-popup-title">åº—é“ºä¼˜æƒ åˆ¸</text><text data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="coupon-popup-close" bindtap="__e">Ã—</text></view><scroll-view class="coupon-list" scroll-y="{{true}}"><block wx:if="{{loadingCoupons}}"><view class="loading-container small"><view class="loading-spinner small"></view><text class="loading-text">åŠ è½½ä¼˜æƒ åˆ¸...</text></view></block><block wx:else><block wx:if="{{$root.g3===0}}"><view class="empty-container small"><text class="empty-text">æš‚æ— ä¼˜æƒ åˆ¸</text></view></block><block wx:else><view class="coupon-items"><block wx:for="{{$root.l1}}" wx:for-item="coupon" wx:for-index="index"><view class="{{['coupon-item',(coupon.$orig.type==='SPEED_KILL')?'coupon-speedkill':'',(coupon.m0)?'coupon-disabled':'']}}"><view class="coupon-left"><view class="coupon-value"><block wx:if="{{coupon.$orig.type!=='DISCOUNT'}}"><text class="coupon-currency">Â¥</text></block><text class="coupon-amount">{{coupon.m1}}</text><block wx:if="{{coupon.$orig.type==='DISCOUNT'}}"><text class="coupon-unit">æŠ˜</text></block></view><block wx:if="{{coupon.$orig.minAmount&&coupon.$orig.minAmount>0}}"><text class="coupon-condition">{{"æ»¡"+coupon.$orig.minAmount+"å…ƒå¯ç”¨"}}</text></block></view><view class="coupon-middle"><text class="coupon-name">{{coupon.$orig.name||'åº—é“ºä¼˜æƒ åˆ¸'}}</text><text class="coupon-desc">{{coupon.$orig.description||'è´­ç‰©å¯ç”¨'}}</text><text class="coupon-time">{{coupon.m2}}</text><block wx:if="{{coupon.$orig.type==='SPEED_KILL'}}"><text class="coupon-tag">ç§’æ€</text></block><block wx:else><block wx:if="{{coupon.$orig.type==='DISCOUNT'}}"><text class="coupon-tag">æŠ˜æ‰£åˆ¸</text></block><block wx:else><text class="coupon-tag">æ»¡å‡åˆ¸</text></block></block></view><view class="coupon-right"><button class="coupon-btn" disabled="{{coupon.m3}}" data-event-opts="{{[['tap',[['claimCoupon',['$0'],[[['coupons','id||index',coupon.$orig.id||index]]]]]]]}}" bindtap="__e"><block wx:if="{{coupon.$orig.userClaimed}}"><text>å·²é¢†å–</text></block><block wx:else><block wx:if="{{coupon.m4}}"><text>ç«‹å³æŠ¢</text></block><block wx:else><block wx:if="{{coupon.m5}}"><text>å·²ç»“æŸ</text></block><block wx:else><text>ç«‹å³é¢†</text></block></block></block></button><block wx:if="{{coupon.$orig.totalCount&&coupon.$orig.totalCount>0}}"><text class="coupon-limit">{{"å‰©ä½™: "+(coupon.$orig.totalCount-(coupon.$orig.usedCount||0))}}</text></block></view></view></block></view></block></block></scroll-view></view></view></block><view class="search-box"><view class="search-input-wrapper"><image class="search-icon" src="https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg"></image><input class="search-input" type="text" placeholder="æœç´¢åº—å†…å•†å“" data-event-opts="{{[['confirm',[['searchProducts',['$event']]]],['input',[['__set_model',['','searchText','$event',[]]]]]]}}" value="{{searchText}}" bindconfirm="__e" bindinput="__e"/></view></view><view class="content-layout"><scroll-view class="category-sidebar" scroll-y="{{true}}"><block wx:if="{{loadingCategories}}"><view class="loading-container small"><view class="loading-spinner small"></view><text class="loading-text">åŠ è½½åˆ†ç±»...</text></view></block><block wx:else><block wx:if="{{$root.g4===0}}"><view class="empty-container small"><text class="empty-text">æš‚æ— åˆ†ç±»</text></view></block><block wx:else><view class="category-list"><block wx:for="{{categories}}" wx:for-item="category" wx:for-index="index"><view data-event-opts="{{[['tap',[['selectCategory',['$0'],[[['categories','id||index',category.id||index,'id']]]]]]]}}" class="{{['category-item',(selectedCategoryId===category.id)?'active':'']}}" bindtap="__e"><text class="category-name">{{category.name}}</text></view></block></view></block></block></scroll-view><scroll-view class="product-area" scroll-y="{{true}}" data-event-opts="{{[['scrolltolower',[['loadMore',['$event']]]]]}}" bindscrolltolower="__e"><block wx:if="{{$root.g5}}"><view class="loading-container"><view class="loading-spinner"></view><text class="loading-text">åŠ è½½å•†å“ä¸­...</text></view></block><block wx:else><block wx:if="{{$root.g6===0}}"><view class="empty-container"><text class="empty-text">æš‚æ— å•†å“</text></view></block><block wx:else><view class="products-grid"><block wx:for="{{products}}" wx:for-item="product" wx:for-index="index"><view data-event-opts="{{[['tap',[['viewProductDetail',['$0'],[[['products','id||index',product.id||index,'id']]]]]]]}}" class="product-card" bindtap="__e"><image class="product-image" src="{{product.image||'https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg'}}" mode="aspectFill"></image><view class="product-info"><text class="product-name">{{product.name}}</text><view class="product-price-row"><text class="product-price">{{"Â¥"+(product.price||'0.00')}}</text><text class="product-sold">{{"å·²å”®"+(product.sales||0)+"ä»¶"}}</text></view></view><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="add-to-cart-wrapper" catchtap="__e"><view data-event-opts="{{[['tap',[['addToCart',[index]]]]]}}" class="add-to-cart" catchtap="__e"><text class="add-icon">+</text></view></view></view></block></view></block></block><block wx:if="{{hasMore}}"><view data-event-opts="{{[['tap',[['loadMore',['$event']]]]]}}" class="load-more" bindtap="__e"><block wx:if="{{!loadingMore}}"><text>åŠ è½½æ›´å¤š</text></block><block wx:else><view class="loading-spinner small"></view></block></view></block><block wx:else><view class="no-more"><text>æ²¡æœ‰æ›´å¤šå•†å“äº†</text></view></block></scroll-view></view><block wx:if="{{$root.g7>0}}"><view class="cart-bar"><view class="cart-info"><view data-event-opts="{{[['tap',[['e3',['$event']]]]]}}" class="cart-icon-wrapper" bindtap="__e"><view class="cart-icon">ğŸ›’</view><view class="cart-count">{{getTotalCount}}</view></view><view class="cart-total"><text class="total-label">åˆè®¡:</text><text class="total-price">{{"Â¥"+getTotalPrice}}</text></view></view><button data-event-opts="{{[['tap',[['checkout',['$event']]]]]}}" class="checkout-btn" bindtap="__e">å»ç»“ç®—</button></view></block><block wx:if="{{$root.g8}}"><view class="cart-detail-popup"><view class="cart-detail-content"><view class="cart-detail-header"><text class="cart-detail-title">è´­ç‰©è½¦</text><text data-event-opts="{{[['tap',[['clearCart',['$event']]]]]}}" class="cart-detail-clear" bindtap="__e">æ¸…ç©º</text></view><scroll-view class="cart-detail-list" scroll-y="{{true}}"><block wx:for="{{cartItems}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cart-item"><image class="cart-item-image" src="{{item.image||'https://ykhyyy.oss-cn-beijing.aliyuncs.com/ht.jpg'}}" mode="aspectFill"></image><view class="cart-item-info"><text class="cart-item-name">{{item.name}}</text><text class="cart-item-price">{{"Â¥"+item.price}}</text></view><view class="cart-item-controls"><view data-event-opts="{{[['tap',[['decreaseQuantity',[index]]]]]}}" class="quantity-btn minus" bindtap="__e">-</view><text class="quantity-text">{{item.quantity}}</text><view data-event-opts="{{[['tap',[['increaseQuantity',[index]]]]]}}" class="quantity-btn plus" bindtap="__e">+</view></view></view></block></scroll-view></view><view data-event-opts="{{[['tap',[['e4',['$event']]]]]}}" class="cart-detail-mask" bindtap="__e"></view></view></block></block></block></block><ai-assistant vue-id="c1c3f95e-2" bind:__l="__l"></ai-assistant></view>