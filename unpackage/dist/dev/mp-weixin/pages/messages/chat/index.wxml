<view class="container"><custom-nav-bar vue-id="c5280cde-1" title="{{chatTitle}}" subtitle="聊天详情" show-back="{{true}}" bind:__l="__l"></custom-nav-bar><view class="chat-container"><scroll-view class="chat-list" scroll-y="true" scroll-top="{{scrollTop}}" data-event-opts="{{[['scrolltoupper',[['loadMoreMessages',['$event']]]]]}}" bindscrolltoupper="__e"><block wx:if="{{isLoadingMore}}"><view class="loading-more"><text>加载更多消息...</text></view></block><block wx:for="{{$root.l0}}" wx:for-item="msg" wx:for-index="index" wx:key="index"><view class="{{['chat-item',(msg.$orig.isSelf)?'self':'']}}"><block wx:if="{{!msg.$orig.isSelf}}"><view class="avatar-container"><image class="avatar" src="{{friendAvatar}}"></image></view></block><view class="{{['message-content',(msg.$orig.isSelf)?'self-message':'',(msg.$orig.isRevoked===1)?'revoked':'']}}"><block wx:if="{{msg.$orig.isRevoked===1}}"><text class="revoked-text">消息已撤回</text></block><block wx:else><text class="message-text">{{msg.$orig.content}}</text></block><text class="message-time">{{msg.m0}}</text><block wx:if="{{msg.$orig.isSelf&&msg.$orig.isRevoked!==1}}"><view class="message-actions"><text data-event-opts="{{[['tap',[['revokeMessage',['$0'],[[['messages','',index]]]]]]]}}" class="action-item" bindtap="__e">撤回</text><text data-event-opts="{{[['tap',[['deleteMessage',['$0'],[[['messages','',index]]]]]]]}}" class="action-item" bindtap="__e">删除</text></view></block></view><block wx:if="{{msg.$orig.isSelf}}"><view class="avatar-container"><image class="avatar" src="https://ykhyyy.oss-cn-beijing.aliyuncs.com/MyApp/userAvatar/default-avatar.png"></image></view></block></view></block><block wx:if="{{$root.g0===0}}"><view class="empty-messages"><text>暂无消息，开始聊天吧</text></view></block></scroll-view><view class="input-area"><input class="message-input" type="text" placeholder="输入消息..." confirm-type="send" data-event-opts="{{[['confirm',[['sendMessage',['$event']]]],['input',[['__set_model',['','inputMessage','$event',[]]]]]]}}" value="{{inputMessage}}" bindconfirm="__e" bindinput="__e"/><view data-event-opts="{{[['tap',[['sendMessage',['$event']]]]]}}" class="send-btn" bindtap="__e">发送</view></view></view></view>